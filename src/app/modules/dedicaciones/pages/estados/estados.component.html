<div class="containerInside card shadow mt-5 bg-white rounded p-5 w-75">
    <div class="row header-row">
      <div class="col">
        <span class="text-secondary">ASOCIAR UN ESTADO A LA DEDICACIÓN</span>
      </div>
    </div>
   
      <hr />
      <form [formGroup]="asociarEstadoForm" (ngSubmit)="asociarEstado()">
        <div class="row regular-row mt-4">
          
          <div class="col-md-4 col-xs-12 col-sm-6 label mb-2">Nuevo Estado</div>
          <div class="col-sm-12 col-xs-12 col-md-8">
            <select formControlName="estados_id" class="form-control" 
              [ngClass]="{ 'is-invalid': submitted && f['estados_id'].errors }">
              <option [value]="op.id | number" *ngFor="let op of nuevoEstado$ | async">
                {{ op.nombre }}
              </option>
            </select>
            <div *ngIf="submitted && f['estados_id'].errors" class="invalid-feedback">
              <div *ngIf="f['estados_id'].errors['required']">
                Elige un Estado
              </div>
            </div>
          </div>
        </div>
        <hr />
        <div>
  
          <div class="row regular-row mt-4">
            <div class="col-md-4 col-xs-12 col-sm-6 label mb-2 mt-4">Observación</div>
            <div class="col-sm-12 col-xs-12 col-md-8">
              <div class="form-group">
                <textarea class="form-control" rows="3" formControlName="observacion"></textarea>
              </div>
            </div>
          </div>
          
          <div *ngIf="error" class="alert alert-danger mt-3 mb-0">
            {{ error }}
          </div>
        </div>

        <!-- Archivos -->
        <h6 class="mt-3">
            <span class="text-muted">Resolución de la dedicación</span>
          </h6>
          <div class="alert alert-danger" *ngIf="files.length > 0 && !validTipoArchivo()">
            Ese tipo de archivo no es permitido.
          </div>
          <div class="alert-danger alert" *ngIf="files.length>0 && !validSize()">
            Los archivos no deben pesar más de 2 MB.
          </div>
      
          <div class="formfloatig" style="display: flex; flex-direction: column;">
            <div *ngFor="let producto of archivos; last as isLast; let i=index" class="arrayLike formfloatig">
              <div class="archivos" style="width:auto; margin-left: 10px;">
                <label class="btn-btn-default">
                  <div class="fa fa-upload fa-2x "></div>
                  <input [id]="i" class="file-upload" type="file" (change)='onUpload($event,i)' />
                  <label [for]="i" style="margin-left: 10px;">{{files[i] ? files[i].name : 'Subir archivo' }}</label>
                </label>
      
              </div>
              <div class="buttons" style="width:fit-content; margin: 0;">
                <button class="btn btn-circle btn-remove m-1" type="button" (click)="removeFile(i)"><i
                    class="fa fa-minus"></i>
                </button>
                <button class="btn btn-circle btn-add m-1" type="button" (click)="archivos.push(1)"
                  *ngIf="isLast && archivos.length<3">
                  <i class="fa fa-plus"></i>
                </button>
              </div>
            </div>
          </div>
      
          <div *ngIf="error" class="alert alert-danger mt-3 mb-0">
            {{ error }}
          </div>


    
        <hr />
        <div class="footer-row d-md-flex justify-content-md-end mb-3">
          <div class="d-grid gap-2 col-sm-12 col-md-4 col-lg-4 col-xl-4 p-2">
            <button type="button" class="btn btn-secondary float-right" 
            [routerLink]="['/dedicaciones/ver-dedicacion', getId]">
              Cancelar
            </button>
          </div>
          <div class="d-grid gap-2 col-sm-12 col-md-4 col-lg-4 col-xl-4 p-2">
            <button class="btn btn-green btn-success float-right">
              <span  *ngIf="isLoading | async" class="spinner-border spinner-border-sm mr-1"></span>
              Enviar
            </button>
          </div>
        </div>
      </form>
    </div>
  